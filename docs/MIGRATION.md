# EF-CMS Migration Documentation

* Cases can be added by POSTing JSON to `/migrate/case`
* PDF files can be added directly to the PDF S3 bucket, with UUIDV4s referenced as `documentId` in the Case objects.
* Authentication is handled by AWS Cognito. An account with the admin role is required.
* Values are validated using Hapi Joi schema definitions in the [Case](entities/Case.md), [Document](entities/Document.md) and [DocketRecord](entities/DocketRecord.md) entities.
* Case JSON generated by the EF-CMS can be viewed in the browser with developer tools for reference.
* Link to pre-populated Postman Request (https://www.getpostman.com/collections/a101df44413a6423e6f4)
  * To use, open Postman, select 'Import' in the top left hand corner, select the 'Link' tab, and paste the link above. You will then be able to view the 'Migrate Case' request in the collection 'Data Migrations' on the left panel.

Valid Case object example:

```
{
    "associatedJudge": "Chief Judge",
    "blocked": false,
    "caseCaption": "Iure enim vel ipsa ",
    "caseId": "99d67c60-dcbf-4ac3-b26f-c1edd518b4f6",
    "caseType": "Declaratory Judgment (Retirement Plan)",
    "createdAt": "2020-01-27T21:09:04.167Z",
    "docketNumber": "284-80",
    "docketNumberSuffix": "R",
    "mailingDate": "09-Mar-1988",
    "highPriority": false,
    "isPaper": true,
    "partyType": "Partnership (as a partnership representative under the BBA regime)",
    "petitionPaymentStatus": "Not Paid",
    "preferredTrialCity": "Fresno, California",
    "procedureType": "Small",
    "qcCompleteForTrial": {},
    "receivedAt": "2020-01-27T05:00:00.000Z",
    "isSealed": false,
    "status": "Closed",
    "closedDate": "2019-03-01T21:40:46.415Z",
    "userId": "3805d1ab-18d0-43ec-bafb-654e83405416",
    "initialDocketNumberSuffix": "R",
    "caseTitle": "Iure enim vel ipsa v. Commissioner of Internal Revenue, Respondent",
    "initialTitle": "Iure enim vel ipsa v. Commissioner of Internal Revenue, Respondent",
    "documents": [
        {
            "caseId": "99d67c60-dcbf-4ac3-b26f-c1edd518b4f6",
            "createdAt": "2020-01-27T05:00:00.000Z",
            "documentId": "a45da352-e588-404c-9cac-715a57a6cda0",
            "mailingDate": "09-Mar-1988",
            "documentType": "Petition",
            "isSealed": true,
            "isLegacySealed": true,
            "isLegacy": true,
            "eventCode": "P",
            "filedBy": "Petr. Keelie Bruce",
            "isPaper": true,
            "partyPrimary": true,
            "partySecondary": false,
            "pending": false,
            "processingStatus": "complete",
            "receivedAt": "2020-01-27T05:00:00.000Z",
            "userId": "3805d1ab-18d0-43ec-bafb-654e83405416",
            "workItems": []
        },
        {
            "date": null,
            "draftState": {
                "eventCode": "MISC",
                "generatedDocumentTitle": "A Strong Opinion",
                "documentType": "T.C. Opinion",
                "scenario": "Type A",
                "primaryDocumentFileSize": 3586249,
                "freeText": "A Strong Opinion",
                "caseId": "99d67c60-dcbf-4ac3-b26f-c1edd518b4f6",
                "documentTitle": "A Strong Opinion",
                "docketNumber": "284-80"
            },
            "servedAt": "2020-05-14T14:49:32.100Z",
            "servedParties": [
                {
                    "name": "Test Served Party 1",
                    "email": "served@example.com"
                },
                {
                    "name": "Test Served Party 2",
                    "email": "served@example.com"
                }
            ],
            "attachments": false,
            "documentType": "T.C. Opinion",
            "filingDate": "2020-05-13T14:49:32.100Z",
            "pending": false,
            "isFileAttached": true,
            "receivedAt": "2020-05-13T14:49:32.100Z",
            "userId": "2805d1ab-18d0-43ec-bafb-654e83405416",
            "eventCode": "TCOP",
            "processingStatus": "complete",
            "signedJudgeName": "Maurice B. Foley",
            "createdAt": "2020-05-13T14:50:04.929Z",
            "scenario": "Type B",
            "entityName": "Document",
            "caseId": "99d67c60-dcbf-4ac3-b26f-c1edd518b4f6",
            "freeText": "Some very strong opinions about sunglasses",
            "signedAt": "2020-05-13T14:50:04.930Z",
            "documentId": "130a3790-7e82-4f5c-8158-17f5d9d560e7",
            "numberOfPages": 1,
            "judge": "Judge Armen",
            "signedByUserId": "2805d1ab-18d0-43ec-bafb-654e83405416",
            "documentTitle": "T.C. Opinion Judge Armen Some very strong opinions about sunglasses",
            "relationship": "primaryDocument",
            "docketNumber": "284-80"
        }
    ],
    "hasPendingItems": true,
    "privatePractitioners": [
        {
            "barNumber": "PT1234",
            "email": "flexionustc@gmail.com",
            "hasEAccess": true,
            "name": "Test Practitioner",
            "role": "privatePractitioner",
            "section": "privatePractitioner",
            "userId": "4719886e-9275-4df9-b0fd-1cfcb62a0504",
            "contact": {
                "address1": "234 Main St",
                "address2": "Apartment 4",
                "address3": "Under the stairs",
                "city": "Chicago",
                "countryType": "domestic",
                "phone": "+1 (555) 555-5555",
                "postalCode": "61234",
                "state": "IL",
            },
            "representingPrimary": true,
            "serviceIndicator": "Paper"
        },
        {
            "barNumber": "PT1111",
            "email": "practitioner3@example.com",
            "hasEAccess": true,
            "name": "Test practitioner3",
            "role": "privatePractitioner",
            "section": "privatePractitioner",
            "userId": "03e00879-343d-4683-87d3-e5310b55e256",
            "contact": {
                "address1": "234 Main St",
                "address2": "Apartment 4",
                "address3": "Under the stairs",
                "city": "Chicago",
                "countryType": "domestic",
                "phone": "+1 (555) 555-5555",
                "postalCode": "61234",
                "state": "IL"
            },
            "representingPrimary": true,
            "serviceIndicator": "Paper"
        }
    ],
    "irsPractitioners": [
        {
            "barNumber": "RT1234",
            "email": "flexionustc+respondent@gmail.com",
            "hasEAccess": true,
            "name": "Test Respondent",
            "role": "irsPractitioner",
            "section": "irsPractitioner",
            "userId": "f0a0581f-11ba-4e35-8287-12a8dbe240f2",
            "contact": {
                "address1": "234 Main St",
                "address2": "Apartment 4",
                "address3": "Under the stairs",
                "city": "Chicago",
                "countryType": "domestic",
                "phone": "+1 (555) 555-5555",
                "postalCode": "61234",
                "state": "IL"
            },
            "serviceIndicator": "Paper"
        }
    ],
    "docketRecord": [
        {
            "description": "Petition",
            "documentId": "a45da352-e588-404c-9cac-715a57a6cda0",
            "eventCode": "P",
            "filedBy": "Petr. Keelie Bruce",
            "filingDate": "2020-01-27T05:00:00.000Z",
            "index": 1
        },
        {
            "description": "Notice Notice",
            "documentId": "42e33c93-023c-40b4-9a4d-143bb26986bb",
            "editState": "{\"eventCode\":\"NOT\",\"documentType\":\"Notice\",\"documentTitle\":\"Notice [Anything]\",\"scenario\":\"Type A\",\"attachments\":false,\"freeText\":\"Notice\",\"generatedDocumentTitle\":\"Notice Notice\",\"caseId\":\"99d67c60-dcbf-4ac3-b26f-c1edd518b4f6\",\"documentId\":\"42e33c93-023c-40b4-9a4d-143bb26986bb\"}",
            "eventCode": "NOT",
            "filingDate": "2020-01-27T21:39:03.125Z",
            "index": 2
        },
        {
            "description": "Entry of Appearance for Petr. Keelie Bruce",
            "documentId": "a45da352-e588-404c-9cac-715a57a6cda0",
            "eventCode": "EA",
            "filingDate": "2020-01-27T21:42:07.774Z",
            "index": 3
        },
        {
            "description": "Order and Decision Entered, Chief Judge Foley",
            "documentId": "a45da352-e588-404c-9cac-715a57a6cda0",
            "editState": "{\"eventCode\":\"OAD\",\"documentType\":\"OAD - Order and Decision Entered,\",\"documentTitle\":\"Order and Decision Entered, [Judge Name] [Anything]\",\"scenario\":\"Type B\",\"attachments\":false,\"date\":null,\"generatedDocumentTitle\":\"Order and Decision Entered, Chief Judge Foley\",\"judge\":\"Chief Judge Foley\",\"caseId\":\"99d67c60-dcbf-4ac3-b26f-c1edd518b4f6\",\"documentId\":\"a45da352-e588-404c-9cac-715a57a6cda0\"}",
            "eventCode": "OAD",
            "filingDate": "2020-01-27T21:43:03.625Z",
            "index": 4
        },
        {
            "description": "Order and Decision Entered, Judge Halpern",
            "documentId": "f2715cf5-14ec-4a55-a28a-a7c11b04a8d2",
            "editState": "{\"eventCode\":\"OAD\",\"documentType\":\"OAD - Order and Decision Entered,\",\"documentTitle\":\"Order and Decision Entered, [Judge Name] [Anything]\",\"scenario\":\"Type B\",\"attachments\":false,\"date\":null,\"generatedDocumentTitle\":\"Order and Decision Entered, Judge Halpern\",\"judge\":\"Judge Halpern\",\"caseId\":\"99d67c60-dcbf-4ac3-b26f-c1edd518b4f6\",\"documentId\":\"f2715cf5-14ec-4a55-a28a-a7c11b04a8d2\"}",
            "eventCode": "OAD",
            "filingDate": "2020-01-27T21:43:48.390Z",
            "index": 5
        },
        {
            "description": "Answer",
            "documentId": "e0d1cc44-59e1-491f-abec-cda104167d51",
            "eventCode": "A",
            "filingDate": "2020-01-27T21:45:24.097Z",
            "index": 6
        },
        {
            "description": "Order d",
            "documentId": "771a5e82-9737-48b1-9097-56ff7ce6d6ee",
            "editState": "{\"eventCode\":\"OSC\",\"documentType\":\"OSC - Order\",\"documentTitle\":\"Order [Anything]\",\"scenario\":\"Type A\",\"attachments\":false,\"date\":null,\"generatedDocumentTitle\":\"Order d\",\"freeText\":\"d\",\"caseId\":\"99d67c60-dcbf-4ac3-b26f-c1edd518b4f6\",\"documentId\":\"771a5e82-9737-48b1-9097-56ff7ce6d6ee\"}",
            "eventCode": "OSC",
            "filingDate": "2020-01-27T21:46:16.211Z",
            "index": 7
        },
        {
            "description": "Legacy Stricken Document",
            "documentId": "eb1f6974-2d1d-4627-a16c-61ec03399fff",
            "eventCode": "RQT",
            "index": 8,
            "isStricken": true,
            "isLegacy": true,
            "filingDate": "2020-06-25T20:58:55.411Z"
        }
    ],
    "noticeOfTrialDate": "2020-01-27T21:09:04.167Z",
    "noticeOfAttachments": false,
    "orderForAmendedPetition": false,
    "orderForAmendedPetitionAndFilingFee": false,
    "orderForFilingFee": false,
    "orderForOds": false,
    "orderForRatification": false,
    "orderToShowCause": false,
    "orderDesignatingPlaceOfTrial": false,
    "contactPrimary": {
        "address1": "982 Oak Boulevard",
        "address2": "Maxime dolorum quae ",
        "address3": "Ut numquam ducimus ",
        "city": "Placeat sed dolorum",
        "countryType": "domestic",
        "name": "Keelie Bruce",
        "phone": "+1 (785) 771-2329",
        "email": "someone@example.com",
        "hasEAccess": true,
        "postalCode": "17860",
        "secondaryName": "Logan Fields",
        "serviceIndicator": "None",
        "state": "LA"
    },
    "contactSecondary": {},
    "otherPetitioners": [
    	{
            "additionalName": "Test Other Petitioner",
	        "address1": "982 Oak Boulevard",
	        "address2": "Maxime dolorum quae ",
	        "address3": "Ut numquam ducimus ",
	        "city": "Placeat sed dolorum",
	        "countryType": "domestic",
	        "name": "Keelie Bruce",
            "email": "someone@example.com",
            "hasEAccess": true,
	        "phone": "+1 (785) 771-2329",
	        "postalCode": "17860",
	        "secondaryName": "Logan Fields",
	        "serviceIndicator": "None",
	        "state": "LA"
    	}
    ],
    "otherFilers": [
        {
            "address1": "42 Lamb Sauce Blvd",
            "city": "Nashville",
            "country": "USA",
            "countryType": "domestic",
            "name": "Gordon Ramsay",
            "email": "someone@example.com",
            "hasEAccess": true,
            "otherFilerType": "Intervenor",
            "phone": "1234567890",
            "postalCode": "05198",
            "state": "AK"
        },
        {
            "address1": "1337 12th Ave",
            "city": "Flavortown",
            "country": "USA",
            "countryType": "domestic",
            "name": "Guy Fieri",
            "email": "someone@example.com",
            "hasEAccess": true,
            "otherFilerType": "Tax Matters Partner",
            "phone": "1234567890",
            "postalCode": "05198",
            "state": "AK"
        }
    ]
}
```
